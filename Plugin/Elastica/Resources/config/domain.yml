services:

    _defaults:
        autowire: true
        autoconfigure: true
        bind:
            array $elasticaConfig: '%apisearch_plugin.elastica.cluster%'
            string $elasticaVersion: '%apisearch_plugin.elastica.version%'
            bool $refreshOnWrite: '%apisearch_plugin.elastica.refresh_on_write%'

    Apisearch\Plugin\Elastica\:
        resource: "../../../../Plugin/Elastica/"
        exclude: "../../../../Plugin/Elastica/{DependencyInjection,Tests,Resources,ElasticaPluginBundle.php,Domain/Search.php}"

    Apisearch\Plugin\Elastica\Domain\AppRepository\IndexRepository:
        tags: ["apisearch_server.app_repository"]

    Apisearch\Plugin\Elastica\Domain\Middleware\CheckHealthMiddleware:
        tags: ["apisearch_plugin.middleware"]

    Apisearch\Server\Domain\Repository\AppRepository\IndexRepository:
        alias: Apisearch\Plugin\Elastica\Domain\AppRepository\IndexRepository

    Apisearch\Server\Domain\Repository\Repository\ItemsRepository:
        alias: Apisearch\Plugin\Elastica\Domain\Repository\ItemRepository

    Apisearch\Server\Domain\Repository\Repository\QueryRepository:
        alias: Apisearch\Plugin\Elastica\Domain\Repository\QueryRepository